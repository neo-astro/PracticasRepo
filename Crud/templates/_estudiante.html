{% extends "index.html" %}


{% block contend %}

{% load widget_tweaks %}
<link rel="stylesheet" href="../static/css/styles.css">


<!-- contenido estudiante  -->
<div class="d-flex flex-column align-items-stretch  bg-light" style="width: 700px;">

  <div class="container-fluid mx-auto text-center bg-dark text-decoration-none text-light mb-1">
    <svg class="bi mt-1 me-2" width="40" height="40">
      <use xlink:href="#userPerfil" />
    </svg>
    <p class="fs-5 mb-2 fw-semibold">Lista de Estudiantes</p>
  </div>



  <div class="list-group list-group-flush border-bottom  scrollarea">

    <!-- elementos usuario -->
    {% for estudiante in estudiantes %}
    <div href="#" class="list-group-item list-group-item-action py-3 rounded-bottom lh-tight" aria-current="true">

      <div class="d-flex w-100 align-items-center justify-content-between">
        <strong class="mb-1">{{estudiante.usua.Nombre}} {{estudiante.usua.Apellido_P}} {{estudiante.usua.Apellido_M}}</strong>
        <small class="fw-bold"> {{estudiante.Nom_carr.Nomc}}</small>
      </div>

      <div class="row">



        <div class="col-6">

          <div class="d-flex justify-content-between align-items-center ">
            <img src="https://cdn-icons-png.flaticon.com/512/1144/1144709.png" class="me-2" height="30px" width="30px"
              alt="">

            <div class="m-lg-1  d-flex">
              <div class="d-flex">
                <img width="18px" height="18px" class="me-2" src="https://cdn-icons-png.flaticon.com/512/126/126509.png"
                  alt="">
                <div>{{estudiante.usua.Telf_Celular}}</div>
              </div>
            </div>

            <div class=" m-lg-1 d-flex">
              <img width="18px" height="18px" class="me-2" src="https://cdn-icons-png.flaticon.com/512/4097/4097494.png"
                alt="">
              <!-- <svg class="bi me-2" width="18" height="18"><use xlink:href="#location"/></svg> -->
              <div class="d-flex" style="width: 300px">
                <div>{{estudiante.usua.Pais}}</div>
                /
                <div>{{estudiante.usua.Provincia}}</div>
                /
                <div>{{estudiante.usua.Ciudad}}</div>
              </div>

            </div>
          </div>

        </div>


        <div class="col text-end">

          <a class="me-1" href="/estudiante/update/{{estudiante.id}}/" title="Actualizar">
            <img class="bi me-1 bg" src="https://cdn-icons-png.flaticon.com/512/2356/2356780.png" class="me-2"
              height="18px" width="18px" alt=""></a>
    
          <a data-bs-toggle="modal" data-bs-target="#exampleModal1" title="Eliminar" class="me-1  text-black" id="delUser" onclick="del(this)" href="/estudiante/eliminar/{{estudiante.id}}/">
            <svg class="bi me-1" width="18px" height="18px">
              <use xlink:href="#delete" />
            </svg>
          </a>


        </div>


      </div>


    </div>
    {% endfor %}

    


  </div>
</div>





</div>



<div class="b-example-divider" style="width:80px"></div>



<!-- barra opciones -->

<div class="d-flex flex-column   bg-light" style="width: 180px;">

  <div class="d-flex flex-column  h-100 ">


    <a  class="mt-3  text-center text-decoration-none  btn-circle  mx-auto" href="/" style="width: 70px ; height: 70px;">
      <img  src="https://cdn-icons-png.flaticon.com/512/4939/4939785.png" width="40px" height="40px" alt="">
    </a>



  </div>


</div>




  
<!-- modal eliminar -->
<div class="modal " id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog"  >
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body text-center">
        Esta a punto de Eliminar este Usuario,
        Desea continuar?
      </div>
      <div id="confirm" class="modal-footer">
      </div>
    </div>
  </div>
</div>









<script type="text/javascript">

    // Eliminamos la propiedad required de todos los campos de entrada
  d.querySelectorAll('input').forEach(function(input) {
  input.removeAttribute('required');
  });
  d.querySelectorAll('select').forEach(function(input) {
    input.removeAttribute('required');
  });
  // d.getElementById('id_Pais').addEventListener('change',(e)=>{
  //   console.log(e)
  // })

  function del(e) {
    document.getElementById('confirm').innerHTML = `<a  class="btn btn-danger" href='${e.href}'>Eliminar</a >`
  }
  


//con el codgio del selst dinamico descargado
  // document.querySelectorAll('input').forEach(function(input){
  //   input.addEventListener('change', function (this){
  //     this.classList.remove("mystyle")
  //   })
  // })

  // document.addEventListener("DOMContentLoaded", () => {
  //   $pais = document.getElementById("Pais")
  //   $estado = document.getElementById("Provincia")
  //   $ciudad = document.getElementById("Ciudad")
  //   $selectPais = document.getElementById("countryId")
  //   $selectEstado = document.getElementById("stateId")
  //   $selectCiudad = document.getElementById("cityId")

  //   setTimeout(() => {

  //     $pais.innerHTML = "seleciona el pais"

  //   }, 500)

  //   $selectPais.addEventListener("change", () => {
  //     $ciudad.innerHTML = 'Elige una ciudad'
  //     $selectEstado.classList.add('progress-select')
  //     setTimeout(() => { $estado.innerHTML = 'Elige una provincia' }, 1000)
  //     setTimeout(() => { $selectEstado.classList.remove('progress-select') }, 1500)


  //   })

  //   $selectEstado.addEventListener("change", () => {
  //     $ciudad.innerHTML = 'Elige una ciudad'
  //     $selectCiudad.classList.remove('progress-select')
  //     $selectCiudad.classList.add('progress-select')
  //     setTimeout(() => {
  //       $ciudad.innerHTML = 'Elige una ciudad'
  //       $selectCiudad.classList.remove('progress-select')
  //     }, 1000)
  //   })





  // })


</script>




{% if error %}
<script type="text/javascript">
  document.getElementById("actModal").click()
  
  const inputs = document.querySelectorAll("input");
  const selects = document.querySelectorAll("select");
  selects.forEach(select => {
    select.addEventListener("change", function() {
      // Elimina la clase que agrega el borde rojo
      this.parentElement.classList.remove("has-error");
      this.nextElementSibling.style.display= "none";
    });
  });
  // Agrega un evento de "cambio" a cada uno de los campos de entrada
  inputs.forEach(input => {
    input.addEventListener("change", function() {
      // Elimina la clase que agrega el borde rojo
      this.parentElement.classList.remove("has-error");
      this.nextElementSibling.style.display= "none";
    });
  });
</script>  
{% endif %}

{% if success %}
  <div id="alertSuccess" class="alertSuccess  w-25 rounded text-center alert alert-success alert-dismissible fade show" role="alert">
    {{ success }}
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
  <script type="text/javascript">
    $alert = document.getElementById("alertSuccess")
    setTimeout( ()=>{
      $alert.parentNode.removeChild($alert)
    }, 3000) 

  </script>  
{% endif %}


{% if msmNoAsignado %}
<div id="alertSuccess" class="alertSuccess  w-25 rounded text-center alert alert-danger alert-dismissible fade show" role="alert">
     {{ msmNoAsignado }}
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
  <script type="text/javascript">
    $alert = document.getElementById("alertSuccess")
    setTimeout( ()=>{
      $alert.parentNode.removeChild($alert)
    }, 3000) 
  </script>  
{% endif %}

{% if msmUpdate %}
  <div id="alertSuccess" class="alertSuccess  w-25 rounded text-center alert alert-success alert-dismissible fade show" role="alert">
    {{ msmUpdate }}
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
  <script type="text/javascript">
    $alert = document.getElementById("alertSuccess")
    setTimeout( ()=>{
      $alert.parentNode.removeChild($alert)
    }, 3000) 
  </script>  
{% endif %}



{% endblock %}

